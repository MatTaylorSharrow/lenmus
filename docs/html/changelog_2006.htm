<html>
<head>
<title>LenMus: Log of things done (ChangeLog)</title>
<link rel="stylesheet" media="all" href="singledoc.css" type="text/css" />
</head>
<body>

<h1><a name="top">Log of things done (ChangeLog)</a></h1>

<p>Please, note two issues:</p>
<ul>
<li>This is not a list of changes included in latest release, but a personal log
of things I am coding. I use it for control purposes, for example to find an answer on
Mondays to question 'what was I doing last Friday?', or to find when I changed something.
</li>
<li>This page is updated in the website usually only at the end of each week.</li>
</ul>
<br /><br />
  <a href="#Oct06">Oct 06</a>
| <a href="#Sep06">Sep 06</a>
| <a href="#Aug06">Aug 06</a>
| <a href="#Jul06">Jul 06</a>
| <a href="#Jun06">Jun 06</a>
| <a href="#May06">May 06</a>
| <a href="#Apr06">Apr 06</a>
| <a href="#Mar06">Mar 06</a>
| <a href="#Feb06">Feb 06</a>
| <a href="#Jan06">Jan 06</a><br /><br />
<a href="###changelog_2005###">Year 2005</a>
<p>&nbsp;</p>


<h2><a name="Oct06">Oct 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>

<tr valign="top">
    <td class="ListaPar">4-oct-06</td>
    <td class="ListaPar">
      <ul>
        <li>Build and tested dialog for lmEarScalesCtrol configuration. Ear Scales
          exercise finished.</li>
        <li>Implemented option to enable/disable right/wrong answer sounds in exercises</li>
        <li>Starting to implement double buffering for score highlight. Currently
          score highligt is done by direct DC drawing and, with
          anti-aliasing, this makes the display dirty.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">3-oct-06</td>
    <td class="ListaPar">
      <ul>
        <li>Testing lmScalesManager, lmEarScalesCtrol and lmEarExerciseCtrol.
          Some details changed.</li>
        <li>lmIntervals: added global function AddSemitonesToNote() to deal with
          non-modal interval computations.</li>
        <li>Fixed bug in Formatter4::RenderJustified(). Crash if line width is
          not enough for drawing just one bar.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">2-oct-06</td>
    <td class="ListaPar">
      <ul>
        <li>Class lmScalesManager coded. Starting tests.</li>
      </ul>
    </td></tr>

</table>


<h2><a name="Sep06">Sep 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>

<tr valign="top">
    <td class="ListaPar">29-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Reviewing code for lmEarScalesCtrol. Moving more methods to abstract class
          lmEarExerciseCtrol; class finished.</li>
        <li>Starting to code specific methods for lmEarScalesCtrol to finish it</li>
        <li>Starting to create class lmScalesManager.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">28-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Abstract class lmEarExerciseCtrol and related created. Testing with
          new class for ear scales exercises.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">27-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Start creation of Ear Scales exercises. Start creation of abstract class
          for ear exercises, as all previous programed controls have a lot of
          code in common.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">26-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Fixed lines and dots spacing and positioning in barlines renderization.</li>
        <li>Cleaning and finishing lmDrawer and derived classes: method names changed
          to clarify usage: SolidX & OutlineX for anti-aliased (when supported), and SketchX
          for aliased.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">25-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Types lmUPoint and lmDPoint added for for portability and legibility.
          All code reviewed to use these types.</li>
        <li>Anti-aliased circles added to draw note/rest dots and other.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">23-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Anti-aliasing added to print preview.</li>
        <li>Fixed bugs in scale computation for print and print preview.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">22-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Added global variable to select aliased/non-aliased screen renderization.
          Created debug option in menu to set/reset this flag.</li>
        <li>Changed all line drawing to use anti-aliasing</li>
        <li>Fixed beam lenght, that was short.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">21-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Anti-aliased operative. Starting to review things to fully use
          anti-aliasing</li>
        <li>Logical units changed to double</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">20-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Tests to draw text on anti-aliased buffer</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">19-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Encapsulating calls to DC in lmPaper finished. Direct access to DC
            removed from remaining points: Shapes.cpp & lmAccidentals</li>
        <li>Defined classes lmDrawer and lmDirectDrawer. Changed lmPaper to use them</li>
        <li>Added package AGG (Anti-Grain Geometry) to LenMus project</li>
        <li>Created class lmAggDrawer. Integrated into lmGraphicManager. Initial
            tests done successfully. Now need to study how to integrate FreeType.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">18-sep-06</td>
    <td class="ListaPar">
      <ul>
        <li>Reviewing strategy to add anti-aliased drawing. Starting to
            document all this</li>
        <li>lmPaper: clean up old code.</li>
        <li>Starting to encapsulate calls to DC in lmPaper. Direct access to DC
            removed from: lmClef, lmBarline, lmBeam, lmKeySignature, lmTimeSignature,
            lmTupletBracket, lmVStaff, Text.cpp, Slur.cpp, lmRest, lmNoteRestObj,
            lmBoxSystem, direction.cpp, lmChord, lmNote</li>
      </ul>
    </td></tr>

</table>


<h2><a name="Aug06">Aug 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>

<tr valign="top">
    <td class="ListaPar">24-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>lmEarIntervalsCtrol::PrepareScore() re-coded so that intervals can be played on
            demand.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">23-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Translating wxMidi into Spanish, and preparing release 1.2 of wxMidi.</li>
        <li>Translating program into Spanish. Problem detected with charset in VirtualBooks.
          Solved by including meta tag to say that charset is utf-8.</li>
        <li>Cleaning lmChordManager: general methods moved to lmConverter. Interval related
          methods moved to lmInterval.</li>
        <li>Reviewing interval generation algorithms to include descending intervals.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">22-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Bug fixed: in ear intervals exercises the keyboard is enabled at wrong places so,
          for example, you can press answer button again after a failure and it is now
          computed as a success. Modified EarIntervalsCtrol keyboard enabling logic to
          allow playing intervals when not expecting an answer. Playing intervals
          not yet implemented.</li>
        <li>TheApp: modified to change lenmus.mo and wxmidi.mo file names to include
          language short name, to allow to avoid maintenance errors.</li>
        <li>Installer modified to include the Unicode build.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">19 to 21-aug-06</td>
    <td class="ListaPar">
      Doing tests to integrate AGG with wxWidgets in order to draw text using FreeType
      and to be able to do anti-aliased drawings.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">16 to 18-aug-06</td>
    <td class="ListaPar">
      Solving problems with Unicode build:
      <ul>
        <li>Crash when running Midi wizard: The problem was caused by bad wxMidi library build.
          Changes in wxMidi build script. Changes in
          wxMidi so that all static text initialization is now initialized in constructor
          to allow for internationalization.</li>
        <li>VirtualBooks do not work in Unicode. There is a bug in wxHtmlController
          (I reported it to wxWidgets project). Changes in VirtualBooks to by pass the bug,
          by converting book content to ANSI utf-8. Now working.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">14-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>IdfyChord: added control_setting param to define the key to save settings.
          Bug fixed: key constrains not taken into account. lmTags: added 'classid'
          parameter to the 'object' tag; now always type='Application/LenMus' for
          all LenMus objects.</li>
        <li>To facilitate internationalization, eBooks Introduction and Single Exercises
                will be coded inside the program instead of being external html files.
                In this way, just by using the .po file these two required files will get
                translated. Book translation is another issue and will require other
                tools and knowledge.
                Object lmVirtualBooks created and tested. Book 'introduction' moved.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">11-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Settings dialog for Chord recognition (ear and theory) finished. Coded
          IdfyChordCtrolParams. Created module ParamsParser to centralize common
          code. Added page for theo_chords to test book. Starting final tests.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">10-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Toolbar removed from TextBookFrame and integrated into main toolbar
          (mainFrame). Print button now works with both types of child frames:
          TextBookFrame and EditFrame.</li>
        <li>Coding settings dialog for Chord recognition (ear and theory).</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">8 & 9-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Finished exercise for Chord recognition (ear and theory). lmEarChordCtrol
          related classes renamed as IdfyChordCtrol, as the control is now
          parameterized to be usable both for ear training and for theory.
          All identified options added and all detected issues fixed:
          <ul>
            <li>Allow to play any chord once the answer is shown</li>
            <li>Before creating and playing a new chord, stop any previous one to
              avoid crashes.</li>
            <li>On exit, stop any chord being played</li>
            <li>Dynamic reconfiguration of buttons depending on chords allowed</li>
            <li>Option: Allow inversions</li>
            <li>Remove accidentals in the key signature</li>
            <li>Option: play melodic (ascending and descending)</li>
            <li>crash if ShowSolution link clicked while still playing</li>
            <li>Option: Do not display key signature</li>
          </ul>
        </li>
        <li>Pending: to code the settings dialog for this control and the params
          object for html embedding.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">7-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Added classes lmChordConstrains and lmEarChordCtrolParams. More changes in
          ChordManager. Constrains.h: added lmChordConstrains. EarChord exercises now works, but
          need to add options.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">4-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Added logic to load/save last used path to open scores. Initialized at
          '/scores/samples'.</li>
        <li>Bug fixed: occasional first system indentation on second page. Indentation
          takes place when there is no offscreen bitmap for the second page and it has to
          be generated while a note being played. x paper pos is altered by highlighted note
          and it causes and invalid position for first system. Now solved by storing
          x pos for systems instead of relying on current paper pos.</li>
        <li>About box dialog: added credits for LilyPond glyphs.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">3-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Added abbreviated syntax for barlines. Modified LDPToken::ParseNewToken() and
          LDPParser::AnalyzeMusicData().</li>
        <li>Continue with lmChordManager: computation of intervals tested.</li>
        <li>MainFrame: Added 'Unit test' to Debug menu. Bud fixed: 'Export' menu was
          enabled when no score was open.</li>
        <li>Score samples finished.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">2-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Bug fixed: no error is issued by LDP parser if previous group (g+) is not
          closed. Fixed by adding code to control this in LDPParser::AnalyzeNoteRest().</li>
        <li>Bug fixed: forcing stem does not work in chords. Fixed by adding m_nStemType
          variable to lmChord. Modified lmNote::SetStemDirection() to recompute
          stem length when stem direction changed.</li>
      </ul>
      Program frozen to proceed to launch release 3.1. Meanwhile starting with EarChord
      exercises. Added lmIdfyChordCtrol. Added lmChordManager.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">1-aug-06</td>
    <td class="ListaPar">
      <ul>
        <li>Bug fixed: Visual highlight fails if more than one page. The problem was
          due to uncompleted code. Need to modify lmScoreObject and lmBoxSystem to keep
          page number. Modified lmBoxSystem::RenderMeasure to store page number.</li>
        <li>LDPParser: completed AnalyzeTuplet to deal with full notation. Added code to deal
          with options (optional tuplet bracket and tuplet number).</li>
        <li>Bug fixed: some literals in Zoom menu and toolbar where not prepared for
          internationalization, using _T() instead of _().</li>
        <li>Bug fixed: problem with offscreen bitmaps ordering if scale changed in
          a page different from first one. It was caused by assuming that bitmap creation
          order was page order. Now page number associated to bitmap.</li>
        <li>Bug fixed: in occasions, notes at the same time were not rendered aligned. The
          problem was caused by precision of floating numbers in comparisons.
          An error tolerance has been introduced.</li>
      </ul>
    </td></tr>

</table>


<h2><a name="Jul06">Jul 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>

<tr valign="top">
    <td class="ListaPar">25 to 31 jul-06</td>
    <td class="ListaPar">
      Preparing new version of LDP manual. Using DocBook. Tests to generate chunked
      pages including website layout code. Redesign of website layout (maintaining
      visual aspect) to accommodate paginated LDP manual. Preparing score sample (Beethoven
      moonlight sonata).
    </td></tr>
<tr valign="top">
    <td class="ListaPar">24-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Changed score files extension from .txt to .lms (LenMus Score). TheApp::OnInit
          modified to change wxDocTemplate.</li>
        <li>Default options for toolbars changed to no labels, small icons.</li>
        <li>LDP manual: Documenting alternatives for polyphony, and elements
              goFwd, goBack.</li>
            <li>Bug fixed: Crash when closing an score being played back. Method OnClose()
              added to lmEditFrame. Parameter fWait added to lmScoreView::StopPlaying().</li>
            <li>Bug fixed: Parser error when parsing t3 in abbreviated syntax. Fixed in
              lmLDPTokenBuilder::ParseNewToken()</li>
            <li>Bug fixed: print score printed blank pages due to incorrect scale computation.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">22-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Preparing sample scores. Fixing minor issues detected.</li>
        <li>LDP parser: implemented time shift element.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">21-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>New offscreen bitmaps management completed. Added zoom toolbar and programmed
          some zooming options (fit width, fit page, zoom combo box).</li>
        <li>Support method in GraphicManager to export scores as images. Now
        usable. Need to modify main menu to include this.</li>
        <li>Bug fixed in lmLogger: in Unicode version strings were not converted to UTF-8.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">20-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Redesigned and replaced offscreen bitmaps management. Moved from
          lmPaper to lmGraphicManager. Introducing more segregation between
          layout phase and renderization phase.</li>
        <li>Preparing icons for zoom toolbar.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">18-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Print/preview has code to limit using big offscreen bitmaps. This
         might cause low quality prints.
         Analysing code, as bitmaps are not really needed.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">15-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Bug fixed: Top and bottom time signature numbers not centred one respect
          the other one. Now solved.</li>
        <li>Bug fixed: Option to not justify last system now operative.</li>
        <li>Some fixes (bad Unicode strings) related to Unicode version. It is now
          operative</li>
        <li>Changed score size in MusicReading level 2 eBook. Now no need to
          estimate score width as it will be not justified. This solves occasional
          bad renderization problems.</li>
        <li>Preparing things for 3.1 release:
          <ul>
            <li>Disabled menus that will not be operational in 3.1 version. </li>
            <li>Dotted notes finally rendered by using a glyph; for screen,
              at small zooming, I get better results using the font than by direct drawing;
              for high zooming factors, the quality is equivalent. I presume that this
                  must be due to anti-aliasing features of font renderization.</li>
          </ul></li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">14-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>lmNote: DrawDot method created. Test to draw it using the music font.
          Adjusting stem line and thickness. Changes in Beam to take thickness
          into account.</li>
        <li>Bug fixed in Formatter4::RenderMinimal(). Set finalX and Indent.
          AS nothing was assigned this caused that the staff lines were not
          drawn in scales exercise.</li>
        <li>Bug fixed in LDPParser::AnaylzeNoteType(): dots were ignored.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">13-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Use of new font lmbasic.ttf. lmGlyph: Modifications include new glyphs and more
          info for glyphs. lmNote modified to not draw notes in block but always draw
          flags and stems. Other minor modifications.</li>
        <li>Bug fixed in lmLoger::ShowDataErrors(). The pointer to the file was deleted
          causing that subsequent attempts to use the log failed (but no crash). For
          the user, the effect was than when opening a second score no error log
          was shown.</li>
        <li>Bug fixed: English tag name for 64th note conflicted with double sharp
          notation.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">11,12-jul-06</td>
    <td class="ListaPar">
      Preparing new font with more symbols.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">10-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>lmInterval: Replaced wxLogMessage by on demand logger trace messages.</li>
        <li>lmLDPParser::AnalizeNoteRest() modified to inherit octave and duration if
          this information is not present (only for abbreviated notation).</li>
        <li>lmLDPParser::AnalyzeNoteType() and lmLDPTokenBuilder::ParseNewToken()
          modified to accept note durations as numbers 1,2,4,8,16,32,..,256</li>
        <li>Program revised to add Longa note/rest.</li>
        <li>lmClef modified to use lmGlyph.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">7-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Modifications to deal with abbreviated notation for notes and rests:
          <ul>
            <li>lmLDPTokenBuilder modified. Also added a stack of pending tokens.</li>
            <li>lmLDPParser::AnalyzeNoteRest() modified.</li>
          </ul></li>
        <li>Move toolbar management to wxAUI. Toolbar splitted in several toolbars.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">6-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Reviewed LDP syntax to allow for abbreviated notation for notes and rests.</li>
        <li>Analysed changes in LDP parser to deal with these changes.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">5-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Reviewed key names tags for LDP internationalization.</li>
        <li>Reviewed "NoVisible" tag for LDP internationalization.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">4-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Added cast shadow to scores.</li>
        <li>Bug fixed: staff lines in some cases are drawn towards the left.</li>
        <li>Reviewed clef names tags for LDP internationalization.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">3-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Starting to review LDP parser to finish internationalization.
          Created context table
          for tags. Reviewed note names and barlines names. Global method NoteTypeToData()
          removed from AuxMusic.cpp and moved to LDPParser::AnalyzeNoteType().</li>
        <li>Tuplets: fixed bug for tn/m syntax. Need to change LDP token parser to accept
          labels containing slashes.</li>
            <li>LDPParser: unified treatment of notes and rests. Method AnalyzeNoteRest()
              created.</li>
        <li>Playback buttons included in main toolbar. Automatically enabled/disabled
          when appropriate</li>
          <li>Zoom menu: Add item 'other'</li>
        <li>View rulers disabled in release version, until rulers finished.</li>
        <li>Scoreview window: changed background for score and removed the page frame.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">2-jul-06</td>
    <td class="ListaPar">
      Implemented changes to allow for all types of tuplets. Modifications
      in lmTupletBracket constructor, LDPParser::AnalyzeNote, added
      LDPParser::AnalyzeTuplet.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">1-jul-06</td>
    <td class="ListaPar">
      <ul>
        <li>Planning for 3.1 release that will include score publication facilities. Estimated
          release date: August 15th.
          List of features to include. Prepare preliminary web
          site page with information about 3.1 release.</li>
        <li>Review triplets related code to expand it for all
          kind of tuplets.</li>
      </ul>
    </td></tr>

</table>


<h2><a name="Jun06">Jun 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>

<tr valign="top">
    <td class="ListaPar">29,30-jun-06</td>
    <td class="ListaPar">
          Fixed problems related to changes in 'instrument' element. Modifying code
          to render instrument abbreviated name when it exits. LDP source code
          generation methods: starting two review and complete.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">27,28-jun-06</td>
    <td class="ListaPar">
      Review of 'instrument' element to define a more flexible syntax for
        polyphony. Implementation of changes: overlayered voices,
        indentation of first system, printing instrument name before first
        system, single voice across several staves. It affected mainly to classes
        lmLDPParser, lmInstrument and renderization (lmFormatter4 and lmBoxSystem).
        First tests successful.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">26-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Implementation of Text element. Modified lmWordDirective, lmBasicText.
        Removed struct lmXMLPosition and replaced by lmLocation.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">25-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Formatter4 modified to not draw staff lines after the final bar.</li>
      <li>GraphicManager: added class lmRenderOptions.</li>
      <li>Added method lmVStaff::GetXPosFinalBarline().</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">23-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Implementation of Titles finished. All options working.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">22-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>LDP Parser modified to introduce compact notation [ name=value --> (name value) ].
        Changes only in lmLDPTokenBuilder::ReadToken() and
        lmLDPTokenBuilder::ParseNewToken().</li>
      <li>LDP Parser: added method AnalyzeLocation(). AnalizeTitle() modified to accept
        location parameter.</li>
      <li>LDP Parser modified to accept numbers followed by letters, so numbers with
        units (i.e.: 12pt, 10mm) can be processed. Required a modification in
        lmLDPTokenBuilder::ParseNewToken().</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">21-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Implementation of 'title' elements. Added methods lmScore::AddTitle(),
        lmScore::MeasureTitle(), lmLDPParser::AnalyzeTitle(), lmLDPParserAnalyzeFont().
        Modified methods lmScore::WriteTitles(), lmLDPParser::AnalyzeScoreV105().
        Modified object lmScoreText. Other minor modifications related to this.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">13-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Continue with chord renderization: Adjusting method to position
        accidentals without collisions. Change to process non-right-shifted notes first.
        Use bounding rectangle instead of selection rectangle.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">12-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Continue with chord renderization: testing and adjusting method to position
        accidentals without collisions. Need to process notes in order: notes non-shifted
        right first.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">9-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Continue rewriting lmNote renderization to split it in shapes.
        Added method DrawNote()</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">8-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Starting to change lmAccidental to use shapes.</li>
      <li>Reviewing and documenting how renderization process work.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">7-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>lmShape objects defined. lmNote: head now rendered using shapes.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">6-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: When playing back a score, accidentals not always propagated
        along the measure. The problem was caused by not initializing the new context
        with current accidentals.</li>
      <li>Continue implementation of new chord renderization algorithm. Several new methods
        added in lmNote, lmChord, lmScoreObj::CheckForCollision(), lmAccidental.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">5-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Reviewing accidentals: symbols moved to Glyph.cpp; methods changed accordingly;
        all selection rectangles adjusted.</li>
      <li>LDP language: added symbol 'x' to allow to specify a double sharp symbol. From now,
        the sequence '++' will be interpreted as sharp-sharp. Program reviewed to adapt to
        this change.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">2-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>LDP parser: added method AnalyzeStem().</li>
      <li>Chord renderization reviewed to flip noteheads when required to avoid noteheads
        collisions.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">1-jun-06</td>
    <td class="ListaPar">
    <ul>
      <li>Fixed identified bugs in code related to rendering beams in chords.</li>
      <li>Fixed bug: crash when closing scores containing beamed chords. The problem was
        caused by including non-base chord notes in the beam object.</li>
      <li>Flags positions for chord notes adjusted (in Glyph.cpp).</li>
      <li>Identified and removed old code related to keeping information (clef, key) to
       render system prolog.</li>
      <li>Engraving rules for stem length implemented.</li>
    </ul>
    </td></tr>


</table>


<h2><a name="May06">May 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>

<tr valign="top">
    <td class="ListaPar">31-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>New method for drawing the system prolog implemented.</li>
      <li>Starting to implement unfinished issues and code related to chords.
        Computation of stem direction for not beamed chords finished. Added
        method lmChord::ComputeStemDirection(). Full engraving rules implemented
        and tested.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">30-may-06</td>
    <td class="ListaPar">
    Reviewing the LDP language to continue developing the score editor and modifying LDP
    parser accordingly:
    <ul>
      <li>Method LDPParser::AnalyzeKeySignature() implemented. VStaff::AddKeySignature()
        methods modified to add fVisible parameter.</li>
      <li>Tag 'newSystem' introduced. Need to do modifications in several places, mainly
        in SOControl, VStaff, LDPParser, Formatter4.</li>
      <li>Reviewing and finishing the issue of drawing the system prolog. Designing an
        implementing a solution based on using the context information stored on notes.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">29-may-06</td>
    <td class="ListaPar">
    Reviewing the LDP language to continue developing the score editor and modifying LDP
    parser accordingly:
    <ul>
      <li>Error window now displayed in Open command, to show
        the errors found during LDP score parsing and analysis.</li>
      <li>Tag 'language' parsed and implemented. Now LDP parser supports internationalization.
        Default changed to English. Tags will be internationalized as I review the parser.</li>
      <li>Tags Score, Instrument reviewed. Tags Voice and Chord implemented.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">23-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: LDP parser did not detect correctly invalid 'g-' flag when a valid
        'g-' flag in previous note/rest. Now fixed.</li>
      <li>Bug fixed: primary and secondary beams too near. Distance has been adjusted.</li>
      <li>Bug fixed in Music Reading Level 2 eBook: patterns for lessons 13 (219) and (222)
        had barlines marks in erroneous places. As a result invalid scores were generated.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">22-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: Clefs reading exercise does not displays any score. The bug was
        caused by the fix to memory leaks problem (3/may); as the fix code was introduced
        in all exercises, in case of lmMusicReadingCtrol it was, inadvertently,
        placed after creating the new score, instead of before. Now fixed.</li>
      <li>AboutDialog fully re-coded. It has been re-designed to facilitate access to
        information and maintenance. Now uses XRC resources. Displayed information
        has been reviewed for final stable version.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">21-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>Improving updater: Testing and fixing issues with/without Internet connection;
        fixing problem to run updater from TheApp::OnInit(). Added options to select
        frequency of checkings (never, daily, weekly or monthly); panel
        lmOtherOptionsPanel modified accordingly.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">19-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: In occasions, bad answers given for the exercises. The problem was
        caused by lmPaper optimisation code: if the new score pointer has the same address
        than the previous one, lmPaper did not re-draw the score and the old non-valid
        bitmaps got displayed. I tried to fix this bug (2-may-06) but fix did not take
        into account all cases. No I think this problem is definitely fixed.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">18-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>Problem with wxLaunchDefaultBrowser bypassed by taking the latest code from
        wxWidgets CVS. Internet Updater now operative.</li>
      <li>Panel lmOtherOptionsPanel created to include other options no related
        to the available setting groups. Currently only the 'automatically check for
        updates' option.</li>
      <li>Help documentation updated to reflect new help menu options as well as
        the new 'Others' setting group.</li>
      <li>Created icons for 'visit LenMus website' menu item and for 'Other' setting
        group.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">17-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>TheApp:OnInit() modified to invoke CheckForUpdates() if flag set on lenmus.ini
        file.</li>
      <li>Bug fixed: In first run installed languages are not recognized.
        It was caused by not properly setting the locale folder, as paths were
        instantiated before the language was chosen.</li>
      <li>Updated Single Exercises book (name and description of theo intervals and
            key signatures exercises) to reflect new features.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">11 to 16-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>Implementing Internet updater. Classes for dialogs (file UpdaterDlg.cpp) added.
        Checking if a new version is available now operative. Problems with wxWidgets to
            open browser in download page.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">10-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>The issue of scores owned by lmScoreAuxCtrol revised. Now scores no longer
        owned by the aux ctrol but by the main ctrol. All ctrols modified accordingly.
      </li>
      <li>Added sound feedback (wrong/right answer sound) to all exercises. To do this the
        following changes done:
        <ul>
          <li>Wave sounds directory created. lmPaths modified to take this new path into
            account.</li>
          <li>Class lmWaveManager created. It is a singleton destroyed at TheApp::OnExit().</li>
          <li>lmCountersCtrol::IncrementWrong() and lmCountersCtrol::IncrementRight() modified
            to produce the appropriate sound.</li>
      </ul></li>
      <li>Starting to implement Internet updater. Menu item 'check for updates'
        added to lmMainFrame. Class lmUpdater added.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">5-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>TheoIntervalsCtrol modified to add buttons for answers in 'build interval'
        exercises. Added button for chromatic semitone. Fixed issues with unison and
        chromatic semitone.</li>
      <li>Credits for used software added to About Box.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">4-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>Renderization options added to lmScore. Notes spacing problem in scales exercises
        now fixed.</li>
      <li>Starting to analyse how to set up buttons for answers in 'build interval'
        exercises.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">3-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: Memory leaks in scales exercise. The problem was
        caused because old exercise score was not deleted.</li>
      <li>Answer buttons added for 'deduce scale' problem type. in
        TheoScalesCtrol. CountersCtrol included. Some re-layout needed.
        Enabled/disabled button links when appropriate.</li>
      <li>Fixing notes spacing problem (too much space between notes in intervals and
        scales exercises). In version 2.0 RenderMinimal method was used to render these
        exercises. Formatter4::RenderMinimal() re-coded. VStaff::Draw() deleted.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">2-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: In occasions, bad answers given for the exercises. The problem was
        caused by lmPaper optimization code: if the new score pointer has the same address
        than the previous one, lmPaper did not re-draw the score and the old non-valid
        bitmaps got displayed.</li>
      <li>CountersCtrol included in EarIntervalsCtrol. Some re-layout needed.
        Enabled/disabled button links when appropriate. Name of interval now displayed
        when requesting to show the solution.</li>
      <li>Bug fixed in lmIntervals: strings initialized only in one constructor.
        Initializations moved to a private method and invoked from both constructors.</li>
      <li>CountersCtrol included in EarCompareIntvCtrol. Some re-layout needed.
        Enabled/disabled button links when appropriate. Name of intervals now displayed
        when requesting to show the solution.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">1-may-06</td>
    <td class="ListaPar">
    <ul>
      <li>CountersCtrol included in TheoKeySignCtrol. Some re-layout needed.
        Enabled/disabled button links when appropriate.</li>
      <li>Bug fixed: Wrong answers in key signatures exercise (Spanish version). They were
        caused by bad translated strings.</li>
    </ul>
    </td></tr>

</table>


<h2><a name="Apr06">April 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista" ID="Table11">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>

<tr valign="top">
    <td class="ListaPar">30-apr-06</td>
    <td class="ListaPar">
    <ul>
      <li>Created control with counters for wrong/right answers (class lmCountersCtrol),
        to be included in all exercises. Tested and finished.</li>
      <li>CountersCtrol included in TheoIntervalsCtrol. Some re-layout needed.</li>
      <li>TheoIntervalsCtrol: enable/disable button links when appropriate.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">28-apr-06</td>
    <td class="ListaPar">
    <ul>
      <li>Continue implementing formatting based on container classes.
        Created class lmBoxSystem. Method Score->Draw() removed.
        Now Paper calls GraphicManager to render the score.</li>
      <li>This removes a program limit: now a score can have an infinite number of systems;
        available memory is the only limitation.</li>
      <li>Removed classes lmFormatter and lmFormatter3. File TimeposTable moved to folder
       'graphics'</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">27-apr-06</td>
    <td class="ListaPar">
      Implementing formatting based on container classes. Created folder 'graphics'.
      Created classes lmGraphicManager, lmFomatter4, lmBoxScore and lmBoxPage. Initial
      testings.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">26-apr-06</td>
    <td class="ListaPar">
    <ul>
      <li>Fixed bug in ScoreAuxCtrol due to logical units change.</li>
      <li>Analizing container classes for formatting.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">25-apr-06</td>
    <td class="ListaPar">
    <ul>
      <li>Mouse wheel events now processed in ScoreView so that scrolling using the mouse
        wheel is now operative.</li>
      <li>Logical units changed to tenths of millimeter. Name changed from lmMicrons to
        lmLUnits. All constants modified to use
        global function lmToLogicalUnits() so that now it is very easy to select a
        different logical unit.</li>
      <li>Formatter3 modified to compute page breaks and render the score splitted into
        pages.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">24-apr-06</td>
    <td class="ListaPar">
    Bug fixed: Occasional crashes after changing interval settings in earIntervalCtrol. Were originated
    because the answer buttons and their names changed but the displayed
    buttons were not re-generated to match the new exercise constrains. Links for 'play' and
    'show solution' now enabled/disabled when appropriate.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">22-apr-06</td>
    <td class="ListaPar">
    Preparing release 3.0 beta 0
    </td></tr>
<tr valign="top">
    <td class="ListaPar">2 to 21-apr-06</td>
    <td class="ListaPar">
    Investigating problem with clipping region for text at certain zooming factors.
    Nothing wrong with the code found.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">1-apr-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: conflict with event IDs. Ranges assigned to dialogs.</li>
      <li>Bug fixed: internationalization. Statically initialized strings not
        translated. Changed to dynamical initialization.</li>
      <li>Upgraded to wxWidgets 2.6.3. This fixes some small issues with wxHtml</li>
    </ul>
    </td></tr>

</table>

<h2><a name="Mar06">March 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>

<tr valign="top">
    <td class="ListaPar">31-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Help documentation (Spanish) reviewed and finished.</li>
      <li>Modified MainFrame.cpp to change help controller to restore
        search panel.</li>
      <li>Bug fixed: When changing language, the new language .hcc and hhk files are not
        loaded properly. Solution: a flag is stored (at lmLangOptionsPanel::Apply) so that
        at next run the program knows about the language change and can
        clean the temp folder. This flag is checked at lmPaths::LoadUserPreferences() and,
        if set, removes all files from temp folder.</li>
      <li>Translation (Spanish) of internationalization file finished. Some small changes
        in some strings to fix translation problems.</li>
      <li>Bug bypassed in lmEarIntervalCtrol: conflict with event IDs.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">30-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Continue writing help documentation (Spanish).</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">29-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Help documentation (English) reviewed and finished.</li>
      <li>Modified MainFrame.cpp to change help controller for removing index and
        search panels.</li>
      <li>Writing help documentation (Spanish) started.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">28-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Writing help documentation (English).</li>
      <li>Modified MainFrame.cpp to change initial help page</li>
      <li>Continue with translation (Spanish) of internationalization file.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">27-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>MusicReading level 2 eBook (Spanish) reviewed and finished.</li>
      <li>MusicReading level 2 eBook translated to English.</li>
      <li>Continue with translation (Spanish) of internationalization file.</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">26-mar-06</td>
    <td class="ListaPar">
    Translation into Spanish of internationalization file started.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">23-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Strings reviewed for Unicode version and internationalization. Some not compliant
        has been changed.</li>
      <li>Bug fixed: disable Print/Print preview if no document open.</li>
      <li>Internationalization file (.po) generated.</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">22-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug patched: Program crash when printing a lesson. The problem was traced back to
        wxHtmlHelpController. wxHtmlWidgetCell is not prepared for printing and ignores
        the DC, rendering always on the parent window. When printing, the parent window is
        NULL and this causes a program crash. The bug has been patched by forcing to
        point to book controller window so that the program doesn't crash, but printing
        doesn't take place, so lessons are printed without the LenMus embedded objects.</li>
      <li>MusicReading level 2 eBook: adjusted height of scores.</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">20-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Windows installer final tests.</li>
      <li>Build release 3.0 alpha 3 using the installer.</li>
      <li>Release it and web site modifications.</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">18-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: Button (in main toolbar) for printing a score doesn't work. The problem
        was solved replacing event identifier wxID_PRINT to MENU_Print. When using
        wxID_PRINT the event never arrived to lmMainFrame::OnPrint()</li>
      <li>Windows installer coding and testing. Ready for final tests.</li>
      <li>Bug fixed: Fail on first run if MIDI wizard cancelled by user.</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">17-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>LDP tag 'Partitura' changed to 'Score' to comply with LDP language standard v4.0</li>
      <li>Added LDPTags.cpp and .h to prepare program for supporting
        tags in different languages.</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">16-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: backward and forward hooks not parsed properly in MusicXML. Modified
        lmXMLParser::ParseMusicDataNote().</li>
      <li>Bug fixed: forward and backward hooks in beamed groups not parallel to main beam.
        The problem was in LDParser::AnalyzeNote() that set wrong beam tags.</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">15-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed in ScoreConstrains: time to align to beat computed wrongly in
        lmFragmentsTable::GetFirstSegmentDuracion().</li>
      <li>Bug fixed in Composer5: when the selected fragment is going to start a measure, and if
        the fragment starts with a rest, the rest was not included. Composer algorithm
        reviewed; modified lmComposer5::GenerateScore().</li>
      <li>Bug fixed in Composer5: method InstatiateNotes() was based in old '+l' LDP tags for
        ties and did not take into account new 'l' tags. Reviewed lmLDPParser::AnalyzeNote()
        to change old syntax as well as sample scores and eBoooks.</li>
      <li>Bug fixed: stems too long if a rest inside the beamed group. The problem was in
        lmBeam::TrimStems()</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">14-mar-06</td>
    <td class="ListaPar">
    Converted music reading lessons 216, 217, 219, 220, 221, 222, 223 and 224. Level 2
    conversion finished. Pending lesson names and final review.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">13-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Bug fixed: crash when clicking on settings button in clefs reading exercise.
        The problem was in lmDlgCfgScoreReading::VerifyData(); it was modified to not verify
        data in non-displayed tabs.</li>
      <li>Bug fixed: crash when accepting new settings in clefs reading exercise.
        The problem was in lmDlgCfgScoreReading::OnAcceptClicked(); it was modified to
        not save data from non-displayed tabs.</li>
      <li>AboutDialog: changed string initialization for supporting Unicode.</li>
      <li>Fixing bad English: Note name 32th changed to 32nd. Side Reading changed to
        Music Reading. TheoSideReadingCtrol and TheoSideReadingCtrolParams renamed as
        TheoMusicReadingCtrol and TheoMusicReadingCtrolParams</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">11-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>Rest position adjusted</li>
      <li>Dot in dotted notes and rests moved 1 tenth to right, so spacing is now
       half line.</li>
     </ul>
    Lesson 214. Content reviewed. Lessons formatting reviewed.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">10-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>LDP syntax for tuplets reviewed. The '(g + t3)'
        syntax is dirty: it forces to assume that 'g-' implies 't-' (and this is
        not always the case in real scores); it moves the 't3' notation inside
        de 'g' notation (more complex); and the gain to save writing is
        minimal. Compare with the alternative: '(n c4 c g+ t3) (n d4 c) (n e4 c
        g- t-)'. So the '(g + t3)' syntax has been removed. LDPParser modified
        accordingly.</li>
      <li>lmLDPParser::AnalysisError() method modified to
        accept a variable argument list (as printf) and, thus, avoiding to have
        to invoke wxString::Format constantly.
        <li>All error messages in LDPParser translated to
        English and reviewed for internationalization. </li>
     </ul>
    Converted music reading lesson 215.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">9-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>MainFrame: added method DumpScore() to facilitate debugging.</li>
      <li>Bug detected and fixed: notes duration for second and third note in a triplet is
        computed wrong in LDP Parser. Method AnalyzeNote() modified. Reviewed usage of enum
        ETuplas. It were used in version 2.0 but with the creation of object lmTupletBracket it
        is no longer needed. Removed from all program. With all this the bug of 7/mar (Bad
        composed scores when triplets in patterns) is fixed. </li>
      <li>Method VStaff::GetTotalDuration() removed. Too specific and currently not used.</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">8-mar-06</td>
    <td class="ListaPar">
    <ul>
      <li>lmFragmentsTable::GetFirstSegmentDuracion() re-coded to convert source pattern
        to a score and take duration from score info. Testing.</li>
      <li>Starting to document Score API.</li>
     </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">7-mar-06</td>
    <td class="ListaPar">
    Testing version Beta 3.0b0 and improving program robustness:
    <ul>
      <li>Bug fixed: Dot was drawn too high in dotted rests.</li>
     </ul>
    Converted music reading lessons 212 and 214. Detected problems with triplets.
     <ul>
      <li>Starting to fix bug: Bad composed scores when triplets in patterns. The problem
        is in current method AuxString::SrcGetPatternDuracion(). It does not
        work for irregular groups (i.e. triplets). This causes badly composed scores.
        Intended solution: not to work with source patterns but convert source to a score;
        then take duration from score. Modifications: Added methods
        lmVStaff::GetTotalDuration(), lmFragmentsTable::GetPatternDuracion(). Need to
        review lmFragmentsTable::GetFirstSegmentDuracion().</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">6-mar-06</td>
    <td class="ListaPar">
    Testing version Beta 3.0b0 and improving program robustness:
    <ul>
      <li>Bad code fixed: replaced Unicode constants L'*' by build type dependent
        expression _T('*').</li>
      <li>Bug fixed in lmComposer5::GenerateScore(): Key signature was not generated according to
        exercise constrains but at random.</li>
      <li>Starting to fix bug: Dot drawn too high in dotted rests. lmRest::DrawObject() modified
        to add vertical displacement. Struct lmGlyph moved from Note.cpp to Glyph.h and
        Glyph.cpp</li>
    </ul>
    Converted music reading lessons 208, 209, 210 and 211.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">3-mar-06</td>
    <td class="ListaPar">
    Testing version Beta 3.0b0 and improving program robustness:
    <ul>
      <li>Bug fixed in Conversion.cpp: note names in upper case letters caused problems in
       TheoScalesCtrol.</li>
      <li>Bug fixed in lmTheoScalesCtrol::NewProblem(): type of problem not initialized.</li>
      <li>Bug fixed in TheoIntervalsCtrol::NewProblem(): note type was upper case and caused
        problems in parsing.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">2-mar-06</td>
    <td class="ListaPar">
    Testing version Beta 3.0b0 and improving program robustness:
    <ul>
      <li>Bug fixed in ScoreCtrolParams and TheoMusicReadingCtrolParms: old G syntax improperly
       detected when triplets.</li>
      <li>Homogenized html params for control play and control solfa between ScoreCtrol and
       MusicReading Ctrol. lmMusicReadingCtrolOptions modified to include play and solfa labels.</li>
      <li>Bug fixed in SoundManager and VStaff: play a measure did not worked properly.</li>
      <li>LDPParser: replaced wxASSERT with code to deal with the error,
        to avoid program crashes when bad score syntax, in methods AnalyzeNote(),
        AnalyzeBarline(), AnalyzeClef().</li>
    </ul>
    LDP Parser: Added AnalyzeTimeSignature(). Modified AnalyzeMeasure() to use it.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">1-mar-06</td>
    <td class="ListaPar">
    Testing version Beta 3.0b0 and improving program robustness:
    <ul>
      <li>ScoreCtrolParams: moved from Tag.cpp to a file. Modified to include error
        reporting and to avoid crashes when invalid html params. Cleaning code.</li>
      <li>lmLDPParser: modified method PopNode() to avoid crashes when bad score syntax.
        Added A5_ExitError state to automata.</li>
      <li>Documenting: how to write eMusicBooks</li>
    </ul>
    </td></tr>
</table>

<h2><a name="Feb06">February 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista" ID="Table10">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>

<tr valign="top">
    <td class="ListaPar">28-feb-06</td>
    <td class="ListaPar">
    Testing version Beta 3.0b0:
    <ul>
      <li>Bug fixed in TheoMusicReadingCtrolParms: key signatures not properly parsed.
        <ul>
          <li>TheoMusicReadingCtrolParms: modified to include error reporting; member variable
            m_sParamErrors included.</li>
          <li>AuxString.cpp: Global function LDPInternalNameToKey() added.</li>
          <li>LDPParser: added method ParenthesisMatch()</li>
        </ul></li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">25-feb-06</td>
    <td class="ListaPar">
    Testing version Beta 3.0b0:
    <ul>
      <li>Bug fixed: in the first run, when no .ini file, the splash hides the MIDI
        wizard. SplashFrame: added method TerminateSplash(). TheApp: added cursor
        busy logic.</li>
      <li>Default value for toolbar: changed to labels under icon.</li>
      <li>Bug fixed in DlgCfgReadingSettings: for clefs reading settings variables
        for music reading options where initialized after having destroyed panels not
        used in clefs reading options.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">23-feb-06</td>
    <td class="ListaPar">
    <ul>
      <li>AboutDialog: added credits for icons. Memory leaks detected and fixed.</li>
      <li>MainFrame: added conditional compilation statement to define wxID_NEW and wx_ID_OPEN
        in debug version.</li>
      <li>Copyright year updated to 2006 in all files.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">21-feb-06</td>
    <td class="ListaPar">
    Implementation of DlgCfgScoreReading dialog finished for music reading options except
    fragments tab options, that require to finish DlgPatternEditor.
    DlgCfgScoreReading music reading options is
    not necessary for 3.0 release as single music reading exercises will be replaced by
    music reading exercises in each lesson. The 'new' single music reading exercise will
    require to have a fragments editor:
    <ul>
      <li>DlgCfgScoreReading: Time signatures selection implemented and tested.
        ScoreConstrains: Load / save time signature settings implemented and tested.</li>
      <li>DlgCfgScoreReading: Key signatures selection implemented and tested.
        ScoreConstrains: Load / save key signature settings implemented and tested.</li>
      <li>Bug fixed in lmTheoMusicReadingCtrolParms::AnalyzeKeys() causing improper
        settings when html param value=all</li>
    </ul>
      Bug fixed in TheoKeySignCtrol: in reverse problem (ask for number of accidentals)
       the link 'show solution' did nothing.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">17-feb-06</td>
    <td class="ListaPar">
    <ul>
      <li>DlgCfgScoreRedaing dialog finished for clefs reading options. Default
       settings now taken from html param tags.</li>
      <li>Some cleaning to prepare beta release:
        <ul>
        <li>lmSplash: removed informative text field.</li>
        <li>lmMainFrame: disabled all menu/toolbar related to unfinished features (notation
        editor, open/import LDP scores and MusicXML scores).</li>
        </ul></li>
      <li>Starting implementation of DlgCfgScoreReading dialog for music reading options.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">15-feb-06</td>
    <td class="ListaPar">
    Continue implementation of DlgCfgScoreRedaing dialog, clefs reading options:
    <ul>
      <li>lmTheoMusicReadingCtrolParams: modified method CreateHtmlCell() in include
        constrains verification.</li>
      <li>lmScoreConstrains: coded methods SaveSettings(), Verify().</li>
    </ul>
    The implementation of default settings, based on html params, is more difficult than
    expected. This will require some thinking.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">14-feb-06</td>
    <td class="ListaPar">
    Continue implementation of DlgCfgScoreRedaing dialog, clefs reading options:
    <ul>
      <li>lmScoreConstrains: added methods SetMaxNote() and SetMinNote(). Removed
        methods and variables related to lesson/level.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">13-feb-06</td>
    <td class="ListaPar">
    Removing cboMode and chkMetronome from lmTheoMusicReadingCtrol:
    <ul>
      <li>Remove related variables and methods from lmTheoMusicReadingCtrolParms,
        lmMusicReadingCtrolOptions and lmTheoMusicReadingCtrol</li>
      <li>Clefs reading exercise added to single exercises book</li>
    </ul>
    Coding missing parts to acknowledge min and max pitch params and
    max interval in Composer5.
    <ul>
      <li>Fixed bug in lmTheoMusicReadingCtrolParms::AnalyzeClef() causing bad
        minPitch and maxPitch settings</li>
      <li>Detected coherence problem: missing upper/lower case in 'normalized'
        LDP elements. Old normalization was upper case; new normalization is
        lower case; now some methods expect lower case and others upper case.
        Reviewed all methods dealing with LDP and source code.</li>
    </ul>
    DataBase object removed. No longer needed.
    <p>Starting to rebuild DlgCfgScoreRedaing dialog.</p>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">12-feb-06</td>
    <td class="ListaPar">
    Analyzing parameters for lmTheoMusicReadingCtrol to finish this control. Implemented
    params &quot;control_settings&quot; and &quot;control cboMode&quot;. After some
    considerations I think cboMode is not necessary: it is a heritage from old lenmus
    architecture (based on independent exercises) and the need to reuse an VB Forms for
    different exercises. Now this is not necessary and is not in line with
    current architecture. Studying how to finally leave this.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">11-feb-06</td>
    <td class="ListaPar">
    Migrated lesson 206 to test ternary rhythms. Testing and debugging composer algorithm:
    <ul>
      <li>Fixed bug in LDPNoteTypeToDuration()</li>
      <li>Composer5: Added methods CreateNoteRest(), CreateRest() and CreateFinalMeasure()</li>
      <li>Fixed bug in lmNoteRest::AddMidiEvents() causing bad MIDI event generation in tied notes.
       Method IsTiedToPrev() added to Note.h</li>
      <li>Fixed bug in lmScoreCtrol::Play() causing metronome settings not being taken into account.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">9-feb-06</td>
    <td class="ListaPar">
    Improving composer algorithm to optimize segment insertion:
    <ul>
      <li>Score.h: added enum ENotesDuration</li>
      <li>Composer5: added methods AddSegment() and CreateNote(). Testing.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">8-feb-06</td>
    <td class="ListaPar">
    Continue implementation of new composer algorithm:
    <ul>
      <li>ScoreConstrains: finishing classes for segments and reviewed code for fragments</li>
      <li>Composer5: implement the new algorithm. Starting testing.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">7-feb-06</td>
    <td class="ListaPar">
    Starting implementation of new composer algorithm:
    <ul>
      <li>AuxString: added methods SrcSplitPattern(), SrcGetPatternDuracion()</li>
      <li>ScoreConstrains: implementing classes for segments</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">6-feb-06</td>
    <td class="ListaPar">
    Review and document algorithm for composer object. Design a new algorithm to take
    into account beat alignment and barline alignment constrains.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">5-feb-06</td>
    <td class="ListaPar">
    <ul>
      <li>Continue implementation of DlgPatternEditor.</li>
      <li>Looking for bugs in Composer5.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">3-feb-06</td>
    <td class="ListaPar">
    <ul>
      <li>Reviewed and modified documentation in mainpage of doxygen documentation and
        related pages.</li>
      <li>Reviewing and documenting params for html ScoreCtrol and MusicReadingCtrol, in order
        to finish the implementation and fixing anything related to this before
        finishing the conversion of old level 2 music reading book and starting the conversion
        of other books.</li>
    </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">2-feb-06</td>
    <td class="ListaPar">
    Implementation of metronome check box for MusicReadingCtrol:
    <ul>
      <li>Reviewing and documenting how metronome works. As metronome implementation is
      different from LenMus 2.0 version, now it is more user intuitive and everything is
      controlled from the main toolbar metronome settings. Therefore the metronome check
      box is no longer needed in MusicReadingControl.</li>
      <li>lmTheoMusicReadingCtrolParms: removed code to deal with param 'control metronome'</li>
    </ul>
    Reviewing and documenting params for html ScoreCtrol and MusicReadingCtrol, in order
    to finish the implementation and fixing anything related to this before
    finishing the conversion of old level 2 music reading book and starting the conversion
    of other books.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">1-feb-06</td>
    <td class="ListaPar">
    'Go back to theory' link implemented and operative:
    <ul>
      <li>lmMusicReadingCtrolOptions: added variables fGoBackLink and sGoBackURL.
        Added method SetGoBackURL()</li>
      <li>lmTheoMusicReadingCtrolParms: added param 'control_go_back'</li>
      <li>lmTheoMusicReadingCtrol: layout revised to reduce unused space.
        Added optional link "Go back to theory". Method OnGoBackButton() implemented</li>
    </ul>
    </td></tr>
</table>

<h2><a name="Jan06">January 2006</a></h2>
<a href="#top">Go to top of document</a>
<table class="Lista" ID="Table1">
<tr valign="top">
    <td class="ListaImpar">Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td class="ListaImpar">Changes<p>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">31-jan-06</td>
    <td class="ListaPar">
      Implementing a method to jump to a MusicReading dialog customized for the needs
      of a lesson:
    <ul>
      <li>Successful tests using internal links.</li>
      <li>lmHtmlWindow::OnLinkClicked() modified to include a new internal link type: LenMusEmbedded.</li>
      <li>Test example now operative.</li>
    </ul>
    Now studying how to implement the link 'Go back to theory'
    </td></tr>
<tr valign="top">
    <td class="ListaPar">30-jan-06</td>
    <td class="ListaPar">
      DlgPatternEditor implementation suspended. Preparing level 2 score music reading
      exercises:
      <ul>
        <li>Starting conversion of old level 2 music reading book. Splitted into
        pages. Tags changed. Reviewing score control.</li>
        <li>lmScoreCtrolOptions: added flag fMusicBorder to control border around music.
        Added option &lt;param name="music_border" value="0 | 1" &gt; to
          lmScoreCtrolParams::AddParam() (in Tags.cpp)</li>
          <li>Adjusted the positioning and margins of ScoreCtrol. Test example now
          operative.</li>
      </ul>
      Embedding a MusicReadingCtrol in music reading books is not a good solution as normally
        there are two or more exercises associated to a lesson. So, as in version 2 behaviour,
        it is necessary to jump to a MusicReading dialog customized
        according exercises needs; and this dialog must have a "return to theory" link.
        Starting to think about the best way to implement this.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">26-jan-06</td>
    <td class="ListaPar">
      For free Music Reading exercises, the user must be able to set up the rhythmic patterns
      she/he would like to practise. In the previous version this was implemented by choosing
      patterns from a graphical list. The problem is that list grew too much. For this new version
      I will implement a rhythmic patterns editor, so the user can easily enter the patterns
      to practise.<br /><br />
      Implementing DlgPatternEditor. Provisionally invoked from debug menu.
    </td></tr>
<tr valign="top">
    <td class="ListaPar">25-jan-06</td>
    <td class="ListaPar">
      <ul>
        <li>TheoIntervalsConstrains:
        <ul>
          <li>Implementation of load/save settings finished.</li>
          <li>Internationalization of button headings and labels.</li>
          <li>Layout reviewed to reduce page height so that it now fits in display (1024x768)</li>
        </ul></li>
        <li>TheoScalesCtrol: width of score sub-control enlarged: the scale did not fit when an
        accidental in each note.</li>
        <li>Starting to review ScoreReading settings</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">23-jan-06</td>
    <td class="ListaPar">
      <ul>
        <li>Implementation of DlgCfgTheoIntervals finished.</li>
        <li>Implementing TheoIntervalsConstrains load/save settings.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">20-jan-06</td>
    <td class="ListaPar">
      <ul>
        <li>Implementation of EarIntervalsConstrains load/save settings finished.
          The key name included as a parameter in lmEarIntvalConstrains constructor</li>
        <li>Methods FirstNoteEqual() and SetFirstNoteEqual() added to
          EarIntvalConstrains.</li>
        <li>Implementation of settings for Ear compare exercises finished.</li>
        <li>Theo Intervals configuration: link "settings" created. Created XML layout for
          DlgCfgTheoIntervals. Created the .cpp and h files. Dialog linked to program.
          Now working in the implementation of DlgCfgTheoIntervals.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">19-jan-06</td>
    <td class="ListaPar">
      <ul>
        <li>Name of global constants defined in score.h changed from XXXXXX to lmXXXXXXX.</li>
        <li>Implementation of DlgCfgEarIntervals finished.</li>
        <li>Starting implementation of EarIntervalsConstrains load/save settings.</li>
        <li>Implementation of settings for Ear Interval exercises finished.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">18-jan-06</td>
    <td class="ListaPar">
      <ul>
        <li>Continue implementation of DlgCfgEarIntervals.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">17-jan-06</td>
    <td class="ListaPar">
      <ul>
        <li>Link 'Reset counters' hidden in EarCompareIntvCtrol, EarIntervalsCtrol,
          TheoIntervalsCtrol and TheoKeySignCtrol. The link is useless until
          answer counters implemented.</li>
        <li>EarIntervalsCtrol: Width of answer buttons reduced to 100px</li>
        <li>Continue implementation of DlgCfgEarIntervals.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">16-jan-06</td>
    <td class="ListaPar">
      <ul>
        <li>Icon names standard finished. Icons renamed.</li>
        <li>TextBookController:
        <ul>
          <li>Toolbar re-created when toolbar settings changed. Methods CreateMyToolBar()
            and UpdateToolbarsLayout()</li>
          <li>Button names shown/hidden according toolbar options settings.</li>
          <li>Initial state of toolbar button 'Index' (TextBookController) now synchronized
            to real state shown. It always started pressed.</li>
        </ul></li>
        <li>toolbar option &quot;icon size: large&quot; disabled in 3.0 version as large icons set
        is not yet created.</li>
      </ul>
    </td></tr>
<tr valign="top">
    <td class="ListaPar">2-jan-06</td>
    <td class="ListaPar">
      <ul>
        <li>LangOptionsPanel changed to use XML resources.</li>
        <li>Created icons for all options. Size 24x24 finally chosen.</li>
        <li>All options panels reviewed to include title and icon.</li>
        <li>ColorsOptPanel removed from current version (commented out in OptionsDlg) as
        is not yet operative.</li>
      </ul>
    </td></tr>
</table>


</body>
</html>
