<?xml version="1.0" encoding="UTF-8"?>
<!-- ======================================================================= -->
<!--   Element opt                                                           -->
<!-- ======================================================================= -->
<sect1 id="s1_element_Opt">
  <title>Layout and behaviour control</title>

  <para>There is a need to change default program settings and
  behaviour:</para>

  <itemizedlist>
    <listitem>
      the appearance of the spacing and page size and margins (global layout). 
    </listitem>

    <listitem>
      the appearance of individual objects. For example, changing stem directions or the notehead type (local layout).
    </listitem>

    <listitem>
      aspects of the translation from LDP notation to internal music representation or from IIR to sound (behaviour rules).
    </listitem>
  </itemizedlist>

  <para>In LenMus these rules, settings and bits of information are internally
  maintained in options associated to each object (Score, VStaff, Staff, Note,
  ..). Options are hierarchical, so that if no options are specified for an
  object, the parent's object relevant options are used.</para>

  <para>Each option value can be modified to change the default program
  settings and program behaviour rules. There are three methods to change
  options values:</para>

  <para>1) by using optional parameters in the definition of the object, the
  options associated to that object get modified:</para>

  <informalexample>
    <programlisting>    (n c4 n stem='down')
            ----------
</programlisting>
  </informalexample>

  <para>In these cases, the options change only affects to that object</para>

  <para>2) by using a 'opt' element to specify the values for the properties
  to change. For example:</para>

  <informalexample>
    <programlisting> (Instrument (opt NoteStemDirection down) 
    (n c4 n) </programlisting>
  </informalexample>

  <para>The value change affects to current object. In previous example the
  'opt' is defined at 'instrument' level so it will affect to all subsequent
  notes until a new value is specified. Options specified on an object will
  prevail over global options but do not replace global options (unless so
  specified, i.e. font-size. THIS MUST BE CHANGED).</para>

  <para>Within LenMus, all this information is maintained in lmObjOptions
  objects, associated to the score objects (lmScore, lmVStaff, lmStaff,
  lmNote, ..).</para>

  <sect2 id="element_Opt">
    <title>The Opt element</title>

    <productionset>
      <production xml:id="ebnf.opt">
        <lhs>
          <replaceable>opt</replaceable>
        </lhs>

        <rhs>
          <command>(opt</command>

          <replaceable>OptionName</replaceable>

          <replaceable>OptionValue</replaceable>

          <superscript>+</superscript>

          <command>)</command>
        </rhs>
      </production>
    </productionset>

    <para>Multiple values are allowed in order to support things like
    specifying units, i.e. (opt length 32 mm)</para>
  </sect2>

  <sect2 id="supported_Opt">
    <title>Supported options: a listing</title>

    <variablelist>
      <varlistentry>
        <term>StopStaffLinesAtFinalBarline</term>

        <listitem>
          Specifies that staff lines must finish at final barline instead of continuing to full length. Value="yes|no". Default: yes. Defined in: score 
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>