//--------------------------------------------------------------------------------------
//    LenMus Phonascus: The teacher of music
//    Copyright (c) 2002-2006 Cecilio Salmeron
//
//    This program is free software; you can redistribute it and/or modify it under the 
//    terms of the GNU General Public License as published by the Free Software Foundation;
//    either version 2 of the License, or (at your option) any later version.
//
//    This program is distributed in the hope that it will be useful, but WITHOUT ANY 
//    WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A 
//    PARTICULAR PURPOSE.  See the GNU General Public License for more details.
//
//    You should have received a copy of the GNU General Public License along with this 
//    program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, 
//    Fifth Floor, Boston, MA  02110-1301, USA.
//
//    For any comment, suggestion or feature request, please contact the manager of 
//    the project at cecilios@users.sourceforge.net
//
//-------------------------------------------------------------------------------------
/*
================================================================================================
 Development log

 Just my notes about work in progress or thinks to do in short time
================================================================================================

doxytags tags found in code:

 @todo        Warnings about things to do to finish something that have been coded provisionally.
 @limit       Program limitation (i.e. size of a table, ...)
 @attention   Explanations about side effects or important facts of a piece of code. These
              comments do not, necessarily, go to the doxygen documentation.    

other tags in code:
 BUG_BYPASS:  code to bypass a bug. It doesn't solve it but avoid a program crash.
 THINK: Considerations and thoughts to think about for improving the program.
 WXDEP: Code copied from wxWidgets or based on wxWidgets source code. The original
        code could change in future wxWidgets versions and we have to review to 
        adapt to those future changes.
 DOC: Important comment to copy/adapt for program documentation. 
 OBSOLETE: To mark obselete parts that remain there for reference (i.e. to illustrate how
        to do something)

-----------------------------------------------------------------------------------------------

LenMus project philosophy (to remind me to always stay on this):

    - p.156
    - I do it for fun, for learning and to help others, no for economical benefit -->
        - Free and Open Source for benefit of others.
        - No commitments that:
            - Takes me out of having a good knowledge of program code and
                of doing some programming.
        - Creates me time preasure or stress.
    - World wide usability -> Internationalization, comply with low end equipment (640x480)
  

-----------------------------------------------------------------------------------------------
  - smile
  - Besides the C++ Programming Language, by Bjarne Stroustrup, the "official" guide to C++,
   I highly recommend Inside the C++ Object Model, by Stanley B. Lippman. (Lippman was one
    of the C++ honchos at Bell Labs.) This book will tell you what _not_ to do, as well
     as why everything in C++ is as it is. If you are confused by anything in C++,
      Lippman's book is the cure.
  
  ---------------------------------------------------------------------------------------
  Now:
    
    
  Tasks for release 3.1
  ------------------------
    - prepare score samples
    
    + modify AboutDlg.h to change version number
    + Prepare UpdateData.xml file
    - update help documentation 
    + Modify and pack eBook introduction
    - Review .po Spanish translation file
    + Prepare release notes for website
    + Prepare news for web site and Sourceforge 
    - Generate the installer
    + installation.htm page
    - LDP manual, html page
    
    Minor issues:
    - spacing in tuples when a whole /half note in other staff
    - tuplet bracket line discontinuities
    - beam: wrong direction in Greensleeves
    
    Bugs:
    - Occasional first system indentation on second page (Moonlight sonata)

    Bugs in Unicode version:
        - Release Unicode:
            - MidiWizard fails
            
    Spanish translation errors:
    - none
    


  Web site
  -------------------------
    - Remove changelog page
    - Add Acknowledgments page
    - Add LDP manual as paginated html


  Tasks for future releases:
  ----------------------------
    - TheoIntervals: need to add answer button for 2dim (i.e.: b3 / -c4)
    - Slurs
    - Clefs: french (Sol1), baritoneC (Do5) and subbass (Fa5)
    - Clefs: octave altered.
    - Include XML import:
        - Treatment of ActualNotes and NormalNotes in XLMParser for tuplets
    - Different paths for Open and Import
    - (? ->no. i18n problem)Font for texts including some music symbols (accidentals)
    - Include theory reference book taken from Wikipedia?
    - view toolbar menu: several toolbars
    - re-locate toolbars if not enough space
    - Channge MDI child windows by notebook
    - Spanish .po translated file for wxMidi
    - ( LDP: allow for num_staves in voice tag only for non-overlayered voices ) ?
    - LDP: How to deal for example with four voices piano reductions:
        - flag overlayered in Instruments.
    - eBookManager: when user changes font size, modify scores scale accordingly.
    - Play toolbox: from/to measure number; instruments list; tempo; volume for each
        instrument; start/pause/stop buttons. Use this toolbox to experiment to
        design a common architecture for all future toolboxes

    
    Bugs to wait to next release:
    -----------------------------
    - If score horizontally scrolled and zooming factor is changed, new display is
        incorrectly shifted.
    - in some cases (6/8?) metronome is not syncronized when playing a score (i.e. E29)
    - memory leaks (chords?)
    - toolbars: problem with wxAUI no resize when change from label to no lables


    Known problems:
    ---------------
    - wxDC::GetTextExtend() method returns not accurate measurements. This causes
        problems to right justify texts.
   
    
    
    
    

    - move logs to temp directory
    
    - width of chord = max width of its notes
    - render accidentals in notes order   
    - need to devise a renderization method based on plugins so that different
        algorithms, user selectable, can be used to compute layout
    
Organizational issues:
    - Integrate wxMidi so that LenMus package at SVN be self-contained.
    - Modify panel pendrive so that erased files do not re-appear
    
    - Strategy: work in secuence in all areas and plan things so that each cicle produces
        some visible result: launch a new release every month. a new document, etc.
        
Area 0: Bugs to solve
    - ¿lmInterval: fix names Unison augmented, Unison perfect, etc...?
    - If Midi Wizard is cancelled some non-relevant error messages are displayed when
        there is no soundcard on the computer (tested with VMWare)
    - MusicXML import: note pitch.
    - crash if click with right button on list of eBooks

        
Area 1: New features to add in short term to working release
    - Proxy issue for Updater
    - Add buttons for answers in scales build exercise.
    - TheoIntervals: double accidentals not generated. Analyze issue of 'four times augmnted'
    - TheoIntervals settings re-design: choose interval types (major, minor, augmented, double augmented...)
    - TheoIntervals: if no accidentals allowed, remove buttons for augmented, diminished, and double.
    
Area 2: Notation editor
    - divide notation features in phases and proceed by phases
    - slurs
    - draw page margins:
        - margins must be line objects in PageBox. They must be
            'non-visible' and there must be a method to render them when required.
            As any ScoreObj it must be draggable.
        - View menu: page margins
    
 
Area 3: Analysis and algorithms
    - sequences (Lylipond, Guido) vs. back/forward (MusicXML)
    - Role of GraphicManager vs. lmPaper. Gradually move lmPaper methods to lmBoxPage. 
    
Area 4: Documentation
    - Re-structure LDP manual: more didactical
    - Set up DocBook edition environment
    - Move LDP manual to DocBook
    - Move all docs (algorithms, architecture, etc. to DocBook)

Area 5: Prepare a new book
    - theory; level 1
    
Area 6: Design new exercises
    - chords
            
Other:
    - Lyrics: compute maximum y and position lyric at a greater y
    - To facilitate internationalization, eBooks Introduction and Single Exercises should
    be coded inside the program instead of being external html files. All other books
    will be written in Spanish and not translated by me.
    - Allow for simultaneous access to books in different languages
    - Debug links for TheoMusicReading exercises or use main menu options


******************************************************************************************
Planning: comming releases 
******************************************************************************************

    
15/ago/2006 - 3.1 release
---------------------------------------------------

    Features and changes:
        - Support for LDP tags internationalization.
        - Scores publication and edition 
 

15/sep/2006 - 3.2 release
----------------------------------------------

    Features and changes:
        - Ear training: identify key signature
        - Ear training: identify scale
        - Exercises on chords: triads


??/s???/2006 - 3.3 release
----------------------------------------------

    Features and changes:
        - Continue extending support to include more musical signs in scores and texts.
        - Music patterns editor, to customize music reading exercises.
        - Answer buttons for Scales exercises.
        - Exercises on chords.
        - Ear training: identify key signature
        - Ear training: identify scale


Upcomig releases features 
----------------------------------------------

- Ear intervals:
    2 - Link 'Show solution': besides drawing the score it should print the interval's name.
    2 - Add check box to select not to show the solution when answered right and continue
        proposing a new problem

- Theo Key signatures:
    2 - Add checkbox buttons to choose direct and inverse problems


 - Tuples: t2
 - Beamed groups in LDP: automatic identification of typical groups
 - Slurs
 - Bug: hook beam after rest in group. Drawn wrong
 - For each exercise prepare an html page to explain it in the website. It could be
    also part of the help book
            


******************************************************************************************
Known bugs:
******************************************************************************************

        - Beams that continue in next system



------------------------------------------------------------------------------------------

- Settings in html embedded objects:
    - All objects must have a settings param specifying either the settings key to use
        to save user settings or that user settings are not allowed.
    - If user settings are allowed, parameters specified in the html object must be
        used only as default settings for prefs->Read methods.  

- In some exercises it would be nice to add an additional link "Explain solution" to 
    provide guidance to the student about the steps followed to find the solution. 
    This link will be enabled only after displaying a solution and will be disabled 
    when 'new problem' clicked.

- Modify UrlAuxCtrol to optionally include an icon at the left.

- Composer5:
    Barline alignment constrains
    
  - Ties: 
    - too much space if stems up
    - continuation in next system
    
  - lmIntervals' constructor to build interval from constrains: replace dbg messages to
    use lmLogger methods
  
  - lmLogger: program DefineTraceMask() and GetDefinedTraceMask() methods.
  - Create dialog for Debug/Set trace level  and use previous methods.
  
  - Re-program lmTheoScalesCtrol and lmTheoIntervalsCtrol so that scale/inerval generator
    is isolated and can be systematically tested.

  - Play /Stop play labels toggle in lmTheoIntervalsCtrol class and lmScoreCtrol. 
  
  - Control single instance running and IPC server. See wxGuide and demo sample.
  
  - Add most recent files history to File menu. See wxFileHistory
  
  - Clarify issue of instrument in metronome settings (channel 10 & 16)
  
  - Review colors for scores. Use global variables instead of constants (wxBLACK, wxBLUE, ...)
    so that 1) avoid inconsistencies, and 2) allow user preferences.
  
  - selection rectangles sizes and positions: base them on a data file with information
    about the font metrics. Font module wedelmusic/openwedelmusic-1.0/source/fon/lioofont.cpp
    deal with .FON files (bitmap) and renders the font by setting bits on/off. Aparently
    no font resizing is possible. See also MuseScore/fonts/mscore20.sfd; in this file all
    information from mscore20.ttf is extracted and there is a reference to a utility for doing
    this
    
  - adjust selection rectangle of: KeySignatures, Accidentals in notes

  - Tuples: Positioning of bracket:
        - when notes not beamed
        - AutoPosition()
        - Selection rectangle for bracket
        - Number position: Take bracket line slope into consideration
  
  - lmNote: Dump of notations (fermata)
  
  - Change lmVStaff iteration from lmInstrument for something similar to iteration of 
    instruments from a score
    
  - Fromatter3::RenderJustified(). Things to review next:
    - lmVStaff::GetVStaffHeight
    
  + Windows: accept scrolling from mouse wheel
  
  - Metronome: implement LED. LED events created in two places: metronome, lmSoundManager.
    

TODO:
-------------------
   - Why Notes can not be moved?
   - Note LONG (> cuadrada) --> Consultar Enciclopedia Britanica online?
     

     

*/
